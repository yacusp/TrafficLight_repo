# TrafficLight_repo

Описание

Сперва разберемся со светофорами для автомобилей.
Прежде всего, для создание общего цикла синхронной работы всех светофоров, необходимо выбрать главный мастер-светофор, который будет получать данные со всех остальных светофоров и уже благодаря логике своего алгоритма принимать решение о том, какой сигнал необходимо подать. Остальные же светофоры, ввиду того, что они знают состояние друг-друга, будет просто подстраиваться. Светофор напротив - будет копировать сигнал, а поперечные светофоры - будут отображать “противоположный”. 
Кроме того, стоит обратить внимание на анализ количества автомобилей. Исходя из режима работы предложенного выше для простого Х-образного перекрестка, количество машин для каждого потока можно суммировать с двух направлений, но учитывая только те, что находятся до стоп линии своей полосы. В итоге получим по одному параметру для горизонтального и вертикального потоков.
Теперь логика или ”адаптация”. 
Зададим некоторое базовое время работы “зеленого” сигнала. 
Это время будет изначально одинаковым для двух потоков.
Далее, всю работу светофора поделим на три различных сценария.
Первый сценарий. 
Один из потоков пустой, а на втором есть машины. 
В таком случае стоит держать светофор зелёным на том потоке, на котором есть машины, не переключая сигнал вовсе. Вся временная разница сбрасывается, если она была. 
Как только на поперечном потоке тоже появляется автомобиль - происходит переключение сценария. 
Второй сценарий.
Автомобили есть в обоих потоках, но в одном из них машин больше. Возможно не просто больше, а больше на какой-то процент или  с учетом какого-то порогового значения. 
В таком сценарии мастер-светофор проводит анализ количества машин в потоках и увеличивает базовое время для того потока, где машин больше. Увеличение может происходить по какой-то формуле.
При следующем переключении происходит повторный анализ и вновь вносятся корректировки, и так далее.
Третий сценарий.
Количество автомобилей в потоках равно, или разница не превышает какое-то пороговое значение. В таком случае светофор возвращается к базовому времени на оба потока.

Примерно такой вариант работы светофора представлен в тестовой программе, которую я написал.
Прошу прощения за отсутствие комментариев, абсолютно всё написал с нуля и вылезать как следует не успел.
Работает неплохо, хотя ошибок и нереализованных задумок в коде осталось прилично.

Дополнительно логика для пешеходного сегмента.
Возможно два классических варианта реализации.
Первый. Зеленый свет пешеходам будет включаться отдельно от всех потоков. Время включения, соответственно, будет зависеть от количества человек. Например, данный этап будет исключаться полностью, если людей нет.
Второй. Пешеходные светофоры работают одновременно с соответствующими направлениями автомобильных.
Тогда будет корректироваться работа всех трёх сценариев с учетом и количества людей. 
Стоит учитывать, что люди, в отличии от автомобилей, могут проходить дорогу “толпой”, и для людей выгоднее не более длинное время зеленого сигнала, а более частое его включение.
